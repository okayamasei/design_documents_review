# ER図1 
## 全体
- Railsで自動で作成されるid, created_at, updated_atのカラムが考慮されていないです。
	>ActiveRecordで作られる登録日、更新日の記述もしましょう。
	>持たないのであれば理由を教えてください。
- 商品在庫関係のテーブルがないです。
- 受注明細がないです。

## 管理人
- 管理人はリレーションしなくていいです。
	>エンドユーザーテーブル、商品テーブルにリレーションがありますが、理由はありますか。

## ユーザ
- 退会状態を管理するカラムがない
	>論理削除を考慮していませんが、エンドユーザが退会した場合該当のレコードはどうなりますか。
- テーブル名は、「会員」「顧客」「エンドユーザ」のような命名が望ましいです。

## 商品
- 購入とリレーションがあります。
	>このリレーションの理由はありますか。
- ディスクが複数ある場合を考慮していないです。
	>CDが複数枚の場合は登録できますか。
- 在庫管理をするカラムがあります。
	>この場合、商品が売れるたびに手打ちで入力するのでしょうか。
	>在庫数は売り上げと入荷で導きます。
- アーティストカラム、ジャンルカラム、レーベルカラムがあります。
	>表記揺れが起こらないような設計にしましょう。
- 商品を削除した場合の論理削除が考慮されていないです。
	>商品を削除した場合、該当のレコードはどうしますか。
- ステータスが何のステータスかわかりません。
	>具体的に何のステータスになりますか。命名は具体的にしましょう。
- 曲名カラムがあります。
 	>同じカラムに何曲も曲名を入れるということでしょうか？
 	>複数ディスクや曲順の管理、1曲だけ曲名を変更、削除などのデータを変更する作業の際に不便になります。

## カート
- ユーザーとリレーションがないです。
	>商品をカートに入れるのは顧客です。どのように管理しますか。
- 不要なカラムであるアーティスト名、ジャケ写、シングル/アルバムがある。
	>商品とリレーションがあるので、データを流用できろことからこれらのカラムは不要です。
- テーブルの命名が適切ではないです。
	>保存する内容はカートの中身んも情報かと思います。複数の商品が入ると思いますので、「カートアイテム」などの命名が適切です。
- PKの命名がテーブル名と合っていません。
	注文idになっています。
- 合計金額を持ってしまっています。
	>カート内で商品ごとの合計金額を算出する必要はありますでしょか。
- 商品とのカーディナリティが１以上になっています。
	>今のままでは、商品を登録した時にカートも存在しないといけなくなっています。
	>その場合、理由はありますか。


## 購入
- ユーザーと購入の間に、消費税や送料、配送ステータス、配送先住所などを管理するテーブルが必要
- テーブル名が適切ではないです。
	>管理者視点で命名しましょう。「受注」などが適切です。
- 購入日カラムがあります。
	>デフォルトで作られる「登録日」で代用可能であると思います。
- 送付先住所はあるが、宛名や郵便番号がないです。
	>住所のカラムに郵便番号や住所、氏名を入れるのでしょうか。適切に分けましょう。
- 送料を管理するカラムがないです。
- 合計金額を管理するカラムがないです。
	>合計金額を確認できる必要があります。
- 注文時の価格を保持するカラムがないです。
	>注文時の価格はどのように参照しますか。
- 商品idと注文個数があります。
	>複数商品を複数個で注文できるはずなので、同じカラムに配列で商品idや注文個数を登録する設計になっています。
	>配列でデータを格納するとデータの操作が複雑になりますので、別テーブルで管理しましょう。

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。

## レビュー1回目
## 全体
- 複数配送先を持つ場合はどのように管理しますか？(決済と結びつける必要がありますか？)
- 受注詳細テーブルがありません。(注文履歴を決済テーブルを見て確認した時に、それに結びついた商品を参照したいので、商品と決済にリレーションを持ちたいですが、関係が多:多になってしまうので、中間テーブルand各注文商品の購入時価格や制作ステータス(CDではないがケーキならあり)の管理をするためのテーブル)

## 商品
- アーティスト、ジャンル、レーベルをレコードごとに更新する設計になっています。
- 論理削除はどのように行いますか？
- 注文詳細が持つべき商品idを持っている

## カート
- ここに入れるデータはカート内の商品のデータなので、カート内商品などの命名が適切です。(カートは複数存在しないため)
- 合計金額はリレーションなどを利用できませんか？
- PKの命名がテーブル名と合っていません。

## 購入
- 決済だと支払い行為を意味するので、管理者視点だと受注などが適切です。
- 購入日カラムは他のカラムと役割が重複しませんか？
- 送料はどこで管理しますか？
- 合計金額を管理するカラムがありません。
- 送付先住所はあるが、宛名や郵便番号がありません。


# レビュー2回目
## ユーザ
- テーブル名は、「会員」「顧客」「エンドユーザ」のような命名が望ましいです。
  - 今回ECサイトを使うユーザ、管理者側を使うユーザ、の2通りのユーザがいるので、混乱しないように分けるためです。
  - データベースの情報は管理者が利用します。管理者側から見た呼び方にしておきましょう。

## 商品
- ステータスでは何のステータスか分からないので、例えば「販売ステータス」などが適切です。

## カート
- 商品とのリレーション(カーディナリティ)は適切でしょうか。

## 購入
-　要件に配送ステータスがありますが、不足しています。

# レビュー3回目
## カート
- 商品とのリレーションはいらない
  > どのように商品とユーザを結びつけるのでしょうか？
    - 前のレビューの指摘はカーディナリティが不適切ということです。カーディナリティが１：（１以上の）多の関係となっていますが、それでよろしいでしょうか？

# レビュー4回目
## 管理人
- 誤字があります。

## 商品
- 商品idを持っています（注文詳細が持つべき）。

# レビュー5回目
- 合格です

